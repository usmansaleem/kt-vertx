<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Editing {{blogItem.id}}</title>

    <!-- font awsome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

    <!-- Bootstrap Scripts -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/navbar.css">
    <link rel="stylesheet" type="text/css" href="/css/bsnavbarfix.css">

    <!-- include summernote css/js-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body>


<div class="container">
    <h1>Edit Blog {{blogItem.id}}</h1>

    <div class="input-group">
        <span class="input-group-addon">Title</span>
        <input id="blogTitle" type="text" class="form-control" value="{{blogItem.title}}">
    </div>

    <div class="input-group">
        <span class="input-group-addon">https://usmans.info/blog/</span>
        <input id="blogUrlFriendly" type="text" class="form-control" value="{{blogItem.urlFriendlyId}}">
    </div>

    <div class="input-group">
        <span class="input-group-addon">Categories</span>
        <input id="blogCategory" type="text" class="form-control"
               value="{{#each blogItem.categories}}{{this.name}},{{/each}}">
    </div>

    <div class="input-group">
        <span class="input-group-addon">Description</span>
        <input id="blogDescription" type="text" class="form-control" value="{{blogItem.description}}">
    </div>

    <hr>
</div>
<div id="blogBody">{{{blogItem.body}}}</div>
<div>
    <button id="saveBlog" class="btn btn-default" type="button">Save</button>
    <div id="refresh_success" class="alert alert-success" role="alert" style="display:none"></div>
</div>

<script>
    $(document).ready(function() {
        //init editor
        $('#blogBody').summernote({
            height: 300,                 // set editor height
            minHeight: null,             // set minimum height of editor
            maxHeight: null,             // set maximum height of editor
            focus: true                  // set focus to editable area after initializing summernote
        });

        $('#saveBlog').click(function () {
            var data = {
                'title': document.getElementById("blogTitle").value,
                'urlFriendlyId': document.getElementById("blogUrlFriendly").value,
                'categories': document.getElementById("blogCategory").value,
                'description': document.getElementById("blogDescription").value,
                'body': $('#blogBody').summernote('code')
            };


            var posting = $.post( "#", data );
            posting.done(function (data) {
                $('#refresh_success').text(data.message);
                $('#refresh_success').show();
            })
        });
    });
</script>
</body>
</html>
